//agentschema

import mongoose from "mongoose";

const agentSchema = new mongoose.Schema({
  name: { type: String, required: true },
  role: { type: String, required: true },
  status: { type: String, enum: ["online", "offline"], default: "offline" },
}, { timestamps: true }); // adds createdAt, updatedAt

export default mongoose.model("Agent", agentSchema);

//conversation schema 

import mongoose from "mongoose";

const conversationSchema = new mongoose.Schema({
  customer_name: { type: String, required: true },
  message_snippet: { type: String, required: true },
  timestamp: { type: Date, required: true }
}, { timestamps: true });

export default mongoose.model("Conversation", conversationSchema);


// initial data seeding 

import mongoose from "mongoose";
import dotenv from "dotenv";
import Agent from "./models/Agent.js";
import Conversation from "./models/Conversation.js";

dotenv.config();

mongoose.connect(process.env.MONGO_URI).then(async () => {
  console.log("Connected to MongoDB — Seeding Data...");

  await Agent.deleteMany();
  await Conversation.deleteMany();

  await Agent.insertMany([
    { name: "Agent Alpha", role: "Sales AI", status: "online" },
    { name: "Agent Beta", role: "Support AI", status: "offline" },
    { name: "Agent Gamma", role: "Scheduler AI", status: "online" },
    { name: "Agent Delta", role: "Sales AI", status: "offline" }
  ]);

  await Conversation.insertMany([
    { customer_name: "John Smith", message_snippet: "Hi, I need help with my recent order #12345...", timestamp: new Date("2025-08-15T10:30:00") },
    { customer_name: "Sarah Johnson", message_snippet: "I am interested in purchasing your premium software package...", timestamp: new Date("2025-08-15T10:25:00") },
    { customer_name: "Michael Chen", message_snippet: "I would like to schedule a demo for next week...", timestamp: new Date("2025-08-15T10:20:00") },
    { customer_name: "Emma Wilson", message_snippet: "The application keeps crashing when I try to export my data...", timestamp: new Date("2025-08-15T10:15:00") },
    { customer_name: "David Brown", message_snippet: "What is your refund policy?...", timestamp: new Date("2025-08-15T10:10:00") },
    { customer_name: "Lisa Garcia", message_snippet: "Can you help me upgrade my account to the business plan?...", timestamp: new Date("2025-08-15T10:05:00") },
    { customer_name: "Robert Taylor", message_snippet: "I forgot my password and the reset email is not arriving...", timestamp: new Date("2025-08-15T10:00:00") },
    { customer_name: "Jennifer Davis", message_snippet: "Is it possible to integrate your API with our existing CRM system?...", timestamp: new Date("2025-08-15T09:55:00") }
  ]);

  console.log("✅ Seeding completed!");
  mongoose.disconnect();
});
